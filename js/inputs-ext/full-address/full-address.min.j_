(function($){"use strict";var FullAddress=function(options){var $scope=$(options.scope);this.init('full-address',options,FullAddress.defaults);if($scope.data('value'))this.value2html($scope.data('value'),$scope.get(0))};$.fn.editableutils.inherit(FullAddress,$.fn.editabletypes.abstractinput);$.extend(FullAddress.prototype,{render:function(){this.$input=this.$tpl.find('input')},value2html:function(value,element){if(!value){$(element).empty();return}
var $addressLines=$('<div>').addClass('address-lines');if(value.name)$addressLines.append('<span class="address-line address-name">'+value.name+'</span>');if(value.address)$addressLines.append('<span class="address-line address-address">'+value.address+'</span>');if(value.city)$addressLines.append('<span class="address-line address-city">'+value.city+'</span>');if(value.postcode)$addressLines.append('<span class="address-line address-postcode">'+value.postcode+'</span>');if(value.phone)$addressLines.append('<span class="address-line address-phone">Tel: '+value.phone+'</span>');$(element).html($addressLines)},html2value:function(html){return null},value2str:function(value){var str='';if(value){for(var k in value){str=str+k+':'+value[k]+';'}}
return str},str2value:function(str){return str},value2input:function(value){if(!value){return}
this.$input.filter('[name="name"]').val(value.name);this.$input.filter('[name="address"]').val(value.address);this.$input.filter('[name="city"]').val(value.city);this.$input.filter('[name="postcode"]').val(value.postcode);this.$input.filter('[name="phone"]').val(value.phone)},input2value:function(){return{name:this.$input.filter('[name="name"]').val(),address:this.$input.filter('[name="address"]').val(),city:this.$input.filter('[name="city"]').val(),postcode:this.$input.filter('[name="postcode"]').val(),phone:this.$input.filter('[name="phone"]').val()}},activate:function(){this.$input.filter('[name="name"]').focus()},autosubmit:function(){this.$input.keydown(function(e){if(e.which===13){$(this).closest('form').submit()}})}});FullAddress.defaults=$.extend({},$.fn.editabletypes.abstractinput.defaults,{tpl:['<div class="editable-address editable-address-name"><label><span>Name: </span><input type="text" name="name" class="input-small"></label></div>','<div class="editable-address editable-address-address"><label><span>Address: </span><input type="text" name="address" class="input-small"></label></div>','<div class="editable-address editable-address-city"><label><span>City: </span><input type="text" name="city" class="input-mini"></label></div>','<div class="editable-address editable-address-postcode"><label><span>Postcode: </span><input type="text" name="postcode" class="input-mini"></label></div>','<div class="editable-address editable-address-phone"><label><span>Phone: </span><input type="text" name="phone" class="input-mini"></label></div>'].join("\n"),inputclass:''});$.fn.editabletypes['full-address']=FullAddress}(window.jQuery))