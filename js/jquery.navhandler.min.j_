!function(n){n.fn.navsetup=function(){return n(this).each(function(){new e.init(n(this))})},n.fn.hasSubnav=function(){return n(this).find(">.submenu").length>0};var e={_elem:null,_aParent:null,init:function(n){n.data("nav-setup")||(n.data("nav-setup",this),this._elem=n,this._initial_configure(),this._events_configure())},_initial_configure:function(){this._elem.find("ul>li").filter(function(){return n(this).hasSubnav()}).addClass("has-subnav"),this._elem.find("ul>li").filter(function(){return!n(this).hasSubnav()}).addClass("no-subnav")},_events_configure:function(){var e=this;this._elem.find(">ul>li").on({touchstart:function(){n(this).trigger("mouseover")},mouseover:function(){n(this).hasSubnav()?n(this).hasClass("subnav-open")?clearTimeout(n(this).data("menu-timeout")):n(this).hasClass("subnav-opening")||(e.close_subnavs(n(this).find(">.submenu")),e._aParent=n(this),n(this).addClass("subnav-opening"),e.open_subnav(n(this))):e.close_subnavs()},mouseout:function(){n(this).hasSubnav()&&n(this).data("menu-timeout",setTimeout(n.proxy(function(){e._aParent=null,e.close_subnav(n(this))},this),1e3))}}),this._elem.on({mousemove:function(t){n(t.target).parent().hasSubnav()&&n(t.target).parent().data("menu-timeout")?clearTimeout(n(t.target).parent().data("menu-timeout")):n(t.target).parent().parent().parent().hasSubnav()&&n(t.target).parent().parent().parent().data("menu-timeout")?clearTimeout(n(t.target).parent().parent().parent().data("menu-timeout")):e._aParent&&n(t.target,e._aParent).length>0&&clearTimeout(n(e._aParent).data("menu-timeout"))}}),this._elem.on("mouseover",".mega-submenu>ul>li>a",function(){if(!n(this).hasClass("active")){var e=n(this).parent().index();n(this).parent().parent().find(".active").removeClass("active"),n(this).addClass("active"),n(this).parent().parent().parent().find(".mega-menu-panes>.mega-menu-pane").hide(0),n(this).parent().parent().parent().find(".mega-menu-panes>.mega-menu-pane:nth-child("+(e+1)+")").stop(!0,!0).slideDown(300)}})},open_subnav:function(e){var t=n(this._elem.data("container")?this._elem.data("container"):document.body);e.offset().left-t.offset().left+e.find(">.submenu").width()>t.width()?e.find(">.submenu").addClass("to-right"):e.find(">.submenu").removeClass("to-right"),e.find(">.submenu").stop(!0,!0).hide(0).slideDown(500,function(){e.addClass("subnav-open").removeClass("subnav-opening"),n(this).hasClass("mega-submenu")&&(n(this).find(">.megamenu-inner>.ind").length<1&&n(this).find(">.megamenu-inner").prepend('<span class="ind"></span>'),n(this).find(">ul>li>.active").removeClass("active"),n(this).find(">ul>li:first>a").addClass("active"),n(this).find(".mega-menu-panes>.mega-menu-pane").hide(0),n(this).find(".mega-menu-panes>.mega-menu-pane:first").stop(!0,!0).slideDown(300))})},close_subnav:function(n){n.find(">.submenu").stop(!0,!0).slideUp(500,function(){n.removeClass("subnav-open").removeClass("subnav-opening")})},close_subnavs:function(e){var t=this._elem.find(">ul>li>.submenu");e&&void 0!=e&&(t=t.not(e)),t.parent().removeClass("subnav-open"),t.stop(!0,!0).slideUp(0,function(){n(this).parent().removeClass("subnav-open").removeClass("subnav-opening")})}};e.init.prototype=e}(jQuery);